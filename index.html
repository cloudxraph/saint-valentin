<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Saint-Valentin ‚ù§Ô∏è</title>
<style>
body {
margin: 0;
background: #f3e8d6;
font-family: Georgia, serif;
overflow: hidden;
}
#container { display: flex; height: 100vh; padding: 40px; box-sizing: border-box; }
#texte { width: 40%; font-size: 30px; color: #5a3e2b; line-height: 1.8; white-space: pre-wrap; }
#scene { width: 60%; position: relative; }
#coeur { position: absolute; top: 45%; left: 50%; transform: translate(-50%, -50%); font-size: 70px; cursor: pointer; animation: pulse 1.5s infinite; text-align: center; }
@keyframes pulse { 0% { transform: translate(-50%, -50%) scale(1); } 50% { transform: translate(-50%, -50%) scale(1.15); } 100% { transform: translate(-50%, -50%) scale(1); } }
#graine { position: absolute; top: -30px; left: 50%; width: 18px; height: 18px; background: #7b4a12; border-radius: 50%; transform: translateX(-50%); display: none; }
#tronc { position: absolute; bottom: 0; left: 50%; width: 16px; height: 0; background: #6b4f3b; border-radius: 10px; transform: translateX(-50%); }
.branche { position: absolute; width: 4px; background: #6b4f3b; border-radius: 5px; transform-origin: bottom center; }
.feuille { position: absolute; opacity: 0; transition: opacity 1s ease, transform 1s ease; }
</style>
</head>
<body>

<audio id="musique" src="youssoupha.mp3"></audio>
<div id="container">
<div id="texte"></div>
<div id="scene">
<div id="coeur">‚ù§Ô∏è<br><span style="font-size:20px;">Saint-Valentin</span></div>
<div id="graine"></div>
<div id="tronc"></div>
</div>
</div>

<script>
const texte = `üíå √âcris ton texte ici‚Ä¶

Depuis que je te connais,
ma vie a chang√©.

Chaque jour avec toi est plus beau,
et aujourd‚Äôhui je voulais te dire
√† quel point tu comptes pour moi ‚ù§Ô∏è

Pour moi durant c est 2ans quasiment
tu a toujours √©tait la pour moi et 
je t en remercie car tu es la meilleure
copine du monde et que tout le monde 
r√™verez  de t avoir tu est √©norm√©ment 
Maximus belle et tu embellie mes journ√©e 

Je t‚Äôaime a la folie et pour toujours
j esp√®re que toi aussi et que l on ira
loin ensemble prends soin de toi et
tout le monde t appr√©cie oublie jamais
sa !!!!!‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è`;

let i = 0;
const zoneTexte = document.getElementById("texte");
function machineAEcrire() {
if(i<texte.length){ zoneTexte.innerHTML+=texte.charAt(i); i++; setTimeout(machineAEcrire,30);}
}

document.getElementById("coeur").onclick = ()=>{
document.getElementById("coeur").style.display="none";
document.getElementById("musique").play();
machineAEcrire();
tomberGraine();
};

function tomberGraine(){
const graine=document.getElementById("graine");
graine.style.display="block";
let y=-30;
const chute=setInterval(()=>{
y+=6; graine.style.top=y+"px";
if(y>window.innerHeight-200){
clearInterval(chute); graine.style.display="none"; pousserArbre();
}
},20);
}

/* üå≥ ARBRE */
function pousserArbre(){
const tronc=document.getElementById("tronc");
let hauteur=0;
const hauteurMax=300;
const nbBranches=10+Math.floor(Math.random()*3);
const start=220; const range=hauteurMax-start; const step=range/nbBranches;
const hauteurs=[]; for(let i=0;i<nbBranches;i++){ hauteurs.push(start+i*step + (Math.random()*5-2.5)); }
const angles=[];
const angleMin=25; // √©cart minimal entre branches

const branchesExistant=[]; // liste des branches principales et secondaires

function generateUniqueAngle(){
let angle; let tries=0;
do { angle=Math.random()*360-180; tries++; }
while(angles.some(a=>Math.abs(a-angle)<angleMin)&&tries<50);
angles.push(angle); return angle;
}

const pousse=setInterval(()=>{
hauteur+=3;
tronc.style.height=hauteur+"px";
for(let i=hauteurs.length-1;i>=0;i--){
if(hauteur>=hauteurs[i]){
creerBranche(hauteurs[i],generateUniqueAngle(),branchesExistant);
hauteurs.splice(i,1);
}
}
if(hauteur>=hauteurMax){ clearInterval(pousse); creerFeuillage(); }
},30);
}

function creerBranche(hauteur,angle,branchesExistant){
const scene=document.getElementById("scene");
const centreX=scene.offsetWidth/2;
const longueur=65+Math.random()*35;

function isOverlap(newAngle,newHauteur,newLongueur){
return branchesExistant.some(b=>{
let dx=Math.abs(b.angle-newAngle);
let dy=Math.abs(b.hauteur-newHauteur);
return dx<10 && dy<20;
});
}

let tries=0;
while(isOverlap(angle,hauteur,longueur) && tries<50){ angle+=(Math.random()*50-25); tries++; }

const b=document.createElement("div");
b.className="branche"; b.style.height=longueur+"px";
b.style.left=centreX+"px"; b.style.bottom=hauteur+"px";
b.style.transform=`rotate(${angle}deg)`;
scene.appendChild(b);
branchesExistant.push({angle:angle,hauteur:hauteur,longueur:longueur});

// branche secondaire 1/3 chance
if(Math.random()<1/3){
const s=document.createElement("div");
s.className="branche";
const longueurS=longueur*0.5;
const offset=angle+(Math.random()*120-60);
let angleS=offset; let triesS=0;
while(isOverlap(angleS,hauteur+longueur*0.5,longueurS)&&triesS<50){ angleS+=(Math.random()*50-25); triesS++; }
s.style.height=longueurS+"px";
s.style.left=centreX+"px";
s.style.bottom=(hauteur+longueur*0.5)+"px";
s.style.transform=`rotate(${angleS}deg)`;
scene.appendChild(s);
branchesExistant.push({angle:angleS,hauteur:hauteur+longueur*0.5,longueur:longueurS});
}
}

/* üíñ FEUILLAGE */
function creerFeuillage(){
const scene=document.getElementById("scene");
const formes=["‚ù§Ô∏è","üíñ","üíï","üíó","üíì"];
const centreX=scene.offsetWidth/2;
const centreY=270;
const rayon=160;

for(let i=0;i<140;i++){
const f=document.createElement("div");
f.className="feuille";
f.innerHTML=formes[Math.floor(Math.random()*formes.length)];
const a=Math.random()*Math.PI*2;
const r=rayon*Math.sqrt(Math.random());
f.style.left=centreX+r*Math.cos(a)+"px";
f.style.bottom=centreY+r*Math.sin(a)+"px";
f.style.fontSize=(15+Math.random()*10)+"px";
f.style.transform="scale(0.3)";
scene.appendChild(f);
setTimeout(()=>{ f.style.opacity=1; f.style.transform="scale(1)"; }, 200+i*25);
}
}
</script>
</body>
</html>

